<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html>
  <head>
    <title>公司代码检索</title>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">    
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="分类导航">
    <link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css" type="text/css">
     <link rel="stylesheet" href="css/ex.css" type="text/css">
    <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="js/excanvas.min.js"></script><![endif]-->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.ztree.all-3.5.min.js"></script>
    <script type="text/javascript" src="layer/layer.min.js"></script>
    <script type="text/javascript">
	function query(){
		var conms=document.getElementById("conms");
		var temp=document.getElementById("keyword").value;
		if (temp == "") {
			layer.alert("搜索内容不能为空！");
			return;
		}
		conms.pa.value=temp;
		conms.submit();
	}

    $(function () {
    	var setting = {
    			check: {
    				enable: true,
    				chkboxType : { "Y" : "s", "N" : "ps" }
    			},
    			data: {
    				simpleData: {
    					enable: true
    				}
    			}
    		};
    	var zNodes=null;
    	if(${zNodes}!="null"){
    		zNodes=${zNodes};
    	};
    	$.fn.zTree.init($("#treeDemo"), setting, zNodes);
		});

	function checkSelected(){
		var treeObj = $.fn.zTree.getZTreeObj("treeDemo");
		var nodes = treeObj.getCheckedNodes(true);
		var str="";
		for(var i=0;i<nodes.length;i++){
			str+=nodes[i].name+";";
		}
		document.getElementById("selectedwords").innerHTML=str;
	}

	function mkExp(){
		var strs=document.getElementById("selectedwords").innerHTML;
		var strArray=strs.split(";");
		var temp="";
		for(var i=0;i<strArray.length;i++){
			temp+=strArray[i]+" OR ";
		}
		document.getElementById("extendExp").innerHTML =temp.substr(0, temp.length - 8);
	}
	
	function clearText(){
		document.getElementById("selectedwords").innerHTML="";
	}
	function cancelCopy(){
		var index=parent.layer.getFrameIndex(window.name);
		parent.layer.close(index);
	}
	function copyToClipBoard(){
		var s=document.getElementById("extendExp").innerHTML;
		parent.document.getElementById("pa").value =s.replace("*","");
		var index=parent.layer.getFrameIndex(window.name);
		parent.layer.close(index);
	}	
    </script>
  </head>
<div class="kc_w  b">
 	<div>
	<div class="js_bg_f2">
	
	<table width="100%" border="0" cellspacing="0" cellpadding="0" class="c_h15">
  <tbody><tr>
    <td width="20%" align="center">请输入公司代码：</td>
    <td width="50%"><input id="keyword" type="text" onkeypress="javascript:if(event.keyCode == 13) query()" class=" b bw" size="50" width="35%"></td>
    <td width="30%"><div class="btn_80nf  title4"><a href="javascript:query();">检索</a></div></td>
  </tr>
</tbody></table>
   <div class="clear"></div>
   <div class="border"></div>
   <div class="clear"></div>
	 <div class="c_h15">
	  <div class="l kc_rw "> 
       <div class=" js_bg_h  b2  js_r2  title "> 申请人选择</div>
	   <div class="js_bg_f  b4  kc_h " style="width:298px;">
	   		<#if zNodes=="null">
	   		<p>${(info)!''}</p>
	   		<#else>
	   			<div><ul id="treeDemo" class="ztree"></ul></div>
	   		</#if>
	   		
		</div>
	  </div>
	  <div class="l  kc_qr "><a href="javascript:checkSelected();"><img src="images/kc_a.gif"></a></div>
	  <div class="r kc_rw">
	     <div>
		  <div class=" js_bg_h  b2  js_r2   "> <div class="l title">编辑抽取出的申请人</div> <div class="r ma"><a href="javascript:clearText();"">清空 》</a></div>
		  </div>
		  <div class="clear"></div>
           <div class="js_bg_f  b4  kcbw " id="selectedwords" contenteditable="true">
           </div>
	     </div>
	    <div class="c_h15">
		 <div class="btn_80nf r title4"><a href="javascript:rtn(0);" onclick="mkExp();">生成表达式</a></div>
		 <div class="clear"></div>
		</div>
		
	   </div>
	  <div class="clear"></div>
	 </div>
	    <div class="clear"></div>
        <div class="border "></div>
        <div class="clear"></div>

	 <div>
	  <div class=" title"> 表达式</div>
       <div class="js_bg_f  kcbwb " id="extendExp"></div>	
	  </div>
	</div>
   </div>
   <div class="foot_tb">
   		<div class="btn_80nf_fr  title4"><a href="javascript:cancelCopy();">取消</a></div>
   		<div class="btn_80nf_fr  title4"><a href="javascript:copyToClipBoard();">确定</a></div>   		
   </div>
   <div class="clear"></div>
   </div>
	<form action="conms.do" id="conms" method="post">
    	<input type="hidden" name="pa" />
    </form>
  </body>
</html>
